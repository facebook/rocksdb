name: facebook/rocksdb/pr-jobs
on: [push, pull_request]
permissions: {}
jobs:
  build-linux-valgrind:
    if: ${{ github.repository_owner == 'facebook' }}
    runs-on:
      labels: 32-core-ubuntu
    container:
      image: zjay437/rocksdb:0.6
      options: --shm-size=16gb
    steps:
    - uses: actions/checkout@v4.1.0
    - uses: "./.github/actions/pre-steps"
    - run: make V=1 -j40 valgrind_test
    - uses: "./.github/actions/post-steps"
